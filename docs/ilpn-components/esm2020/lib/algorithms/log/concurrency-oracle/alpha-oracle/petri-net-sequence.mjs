import { PetriNet } from '../../../../models/pn/model/petri-net';
import { Place } from '../../../../models/pn/model/place';
import { Transition } from '../../../../models/pn/model/transition';
import { Trace } from '../../../../models/log/model/trace';
import { LogEvent } from '../../../../models/log/model/logEvent';
export class PetriNetSequence {
    constructor() {
        this._net = new PetriNet();
        this._lastPlace = new Place();
        this._net.addPlace(this._lastPlace);
        this._trace = new Trace();
    }
    get net() {
        return this._net;
    }
    get trace() {
        return this._trace;
    }
    clone() {
        const clone = new PetriNetSequence();
        clone._net = this._net.clone();
        clone._lastPlace = clone._net.getPlace(this._lastPlace.getId());
        clone._trace = this._trace.clone();
        return clone;
    }
    appendEvent(label) {
        this._trace.events.push(new LogEvent(label));
        this.appendTransition(label);
    }
    appendTransition(label) {
        const t = new Transition(label);
        this._net.addTransition(t);
        this._net.addArc(this._lastPlace, t);
        this._lastPlace = new Place();
        this._net.addPlace(this._lastPlace);
        this._net.addArc(t, this._lastPlace);
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGV0cmktbmV0LXNlcXVlbmNlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvY29tcG9uZW50cy9zcmMvbGliL2FsZ29yaXRobXMvbG9nL2NvbmN1cnJlbmN5LW9yYWNsZS9hbHBoYS1vcmFjbGUvcGV0cmktbmV0LXNlcXVlbmNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBQyxRQUFRLEVBQUMsTUFBTSx1Q0FBdUMsQ0FBQztBQUMvRCxPQUFPLEVBQUMsS0FBSyxFQUFDLE1BQU0sbUNBQW1DLENBQUM7QUFDeEQsT0FBTyxFQUFDLFVBQVUsRUFBQyxNQUFNLHdDQUF3QyxDQUFDO0FBQ2xFLE9BQU8sRUFBQyxLQUFLLEVBQUMsTUFBTSxvQ0FBb0MsQ0FBQztBQUN6RCxPQUFPLEVBQUMsUUFBUSxFQUFDLE1BQU0sdUNBQXVDLENBQUM7QUFFL0QsTUFBTSxPQUFPLGdCQUFnQjtJQU16QjtRQUNJLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxRQUFRLEVBQUUsQ0FBQztRQUMzQixJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksS0FBSyxFQUFFLENBQUM7UUFDOUIsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDO1FBQ3BDLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxLQUFLLEVBQUUsQ0FBQztJQUM5QixDQUFDO0lBRUQsSUFBSSxHQUFHO1FBQ0gsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDO0lBQ3JCLENBQUM7SUFFRCxJQUFJLEtBQUs7UUFDTCxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUM7SUFDdkIsQ0FBQztJQUVNLEtBQUs7UUFDUixNQUFNLEtBQUssR0FBRyxJQUFJLGdCQUFnQixFQUFFLENBQUM7UUFDckMsS0FBSyxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDO1FBQy9CLEtBQUssQ0FBQyxVQUFVLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxLQUFLLEVBQUUsQ0FBRSxDQUFDO1FBQ2pFLEtBQUssQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQUUsQ0FBQztRQUNuQyxPQUFPLEtBQUssQ0FBQztJQUNqQixDQUFDO0lBRU0sV0FBVyxDQUFDLEtBQWE7UUFDNUIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7UUFDN0MsSUFBSSxDQUFDLGdCQUFnQixDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ2pDLENBQUM7SUFFTSxnQkFBZ0IsQ0FBQyxLQUFhO1FBQ2pDLE1BQU0sQ0FBQyxHQUFHLElBQUksVUFBVSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ2hDLElBQUksQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzNCLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDckMsSUFBSSxDQUFDLFVBQVUsR0FBRyxJQUFJLEtBQUssRUFBRSxDQUFDO1FBQzlCLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUNwQyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDO0lBQ3pDLENBQUM7Q0FDSiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7UGV0cmlOZXR9IGZyb20gJy4uLy4uLy4uLy4uL21vZGVscy9wbi9tb2RlbC9wZXRyaS1uZXQnO1xyXG5pbXBvcnQge1BsYWNlfSBmcm9tICcuLi8uLi8uLi8uLi9tb2RlbHMvcG4vbW9kZWwvcGxhY2UnO1xyXG5pbXBvcnQge1RyYW5zaXRpb259IGZyb20gJy4uLy4uLy4uLy4uL21vZGVscy9wbi9tb2RlbC90cmFuc2l0aW9uJztcclxuaW1wb3J0IHtUcmFjZX0gZnJvbSAnLi4vLi4vLi4vLi4vbW9kZWxzL2xvZy9tb2RlbC90cmFjZSc7XHJcbmltcG9ydCB7TG9nRXZlbnR9IGZyb20gJy4uLy4uLy4uLy4uL21vZGVscy9sb2cvbW9kZWwvbG9nRXZlbnQnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBldHJpTmV0U2VxdWVuY2Uge1xyXG5cclxuICAgIHByaXZhdGUgX25ldDogUGV0cmlOZXQ7XHJcbiAgICBwcml2YXRlIF9sYXN0UGxhY2U6IFBsYWNlO1xyXG4gICAgcHJpdmF0ZSBfdHJhY2U6IFRyYWNlO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMuX25ldCA9IG5ldyBQZXRyaU5ldCgpO1xyXG4gICAgICAgIHRoaXMuX2xhc3RQbGFjZSA9IG5ldyBQbGFjZSgpO1xyXG4gICAgICAgIHRoaXMuX25ldC5hZGRQbGFjZSh0aGlzLl9sYXN0UGxhY2UpO1xyXG4gICAgICAgIHRoaXMuX3RyYWNlID0gbmV3IFRyYWNlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IG5ldCgpOiBQZXRyaU5ldCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX25ldDtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgdHJhY2UoKTogVHJhY2Uge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl90cmFjZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2xvbmUoKTogUGV0cmlOZXRTZXF1ZW5jZSB7XHJcbiAgICAgICAgY29uc3QgY2xvbmUgPSBuZXcgUGV0cmlOZXRTZXF1ZW5jZSgpO1xyXG4gICAgICAgIGNsb25lLl9uZXQgPSB0aGlzLl9uZXQuY2xvbmUoKTtcclxuICAgICAgICBjbG9uZS5fbGFzdFBsYWNlID0gY2xvbmUuX25ldC5nZXRQbGFjZSh0aGlzLl9sYXN0UGxhY2UuZ2V0SWQoKSkhO1xyXG4gICAgICAgIGNsb25lLl90cmFjZSA9IHRoaXMuX3RyYWNlLmNsb25lKCk7XHJcbiAgICAgICAgcmV0dXJuIGNsb25lO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhcHBlbmRFdmVudChsYWJlbDogc3RyaW5nKSB7XHJcbiAgICAgICAgdGhpcy5fdHJhY2UuZXZlbnRzLnB1c2gobmV3IExvZ0V2ZW50KGxhYmVsKSk7XHJcbiAgICAgICAgdGhpcy5hcHBlbmRUcmFuc2l0aW9uKGxhYmVsKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXBwZW5kVHJhbnNpdGlvbihsYWJlbDogc3RyaW5nKSB7XHJcbiAgICAgICAgY29uc3QgdCA9IG5ldyBUcmFuc2l0aW9uKGxhYmVsKTtcclxuICAgICAgICB0aGlzLl9uZXQuYWRkVHJhbnNpdGlvbih0KTtcclxuICAgICAgICB0aGlzLl9uZXQuYWRkQXJjKHRoaXMuX2xhc3RQbGFjZSwgdCk7XHJcbiAgICAgICAgdGhpcy5fbGFzdFBsYWNlID0gbmV3IFBsYWNlKCk7XHJcbiAgICAgICAgdGhpcy5fbmV0LmFkZFBsYWNlKHRoaXMuX2xhc3RQbGFjZSk7XHJcbiAgICAgICAgdGhpcy5fbmV0LmFkZEFyYyh0LCB0aGlzLl9sYXN0UGxhY2UpO1xyXG4gICAgfVxyXG59XHJcbiJdfQ==